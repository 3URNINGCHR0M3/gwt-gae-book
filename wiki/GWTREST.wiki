#summary Building a REST GWT client

= Goals =
 * support JSON-only APIs
 * caching, batching, centralized failure handling, undo/redo and XSRF protection, get request status, cancel request, similar to [http://code.google.com/p/gwt-platform/wiki/GettingStartedDispatch gwtp dispatch]
 * support custom headers for each call (use cases: Authorization, pagination, XSRF...), media type
 * support binary fields / multipart requests (e.g. [http://twitpic.com/api.do uploading a file])

= Steps =

For each client-server call, client should 
 * write a generator for Action and Result data 
 * define JSON models for sending and receiving data
 * write a handler ([http://code.google.com/p/gwt-gae-book/source/browse/trunk/CultureShows/src/org/gwtgaebook/CultureShows/client/locations/ReadLocationsHandler.java sample]), which
 * sets `RequestBuilder` data
 * extracts the result
 * run regular gwtp dispatch.execute()


= TODO =
 * include [http://code.google.com/p/piriti/source/browse/trunk/restlet/src/main/java/name/pehl/piriti/restlet/client/UrlBuilder.java UrlBuilder] in guava ? 
 * include `AbstractRequestBuilderClientActionHandler`, `DispatchRequestRequestBuilderImpl`, `RequestRuntimeException` in gwtp
 * Automatically handle registering action handlers, somehow?
  * remove the need for !LocationsHandlerRegistry  

 * use [http://code.google.com/p/gwt-platform/issues/detail?id=179 RequestBuilder] or [http://code.google.com/p/tire-d8/source/browse/trunk/app/src/main/java/name/pehl/tire/client/dispatch/AbstractRestletClientActionHandler.java Restlet] implementation? `Restlet` requires yet another library.

 * full sample including login using openid

= Findings =

[http://code.google.com/p/google-web-toolkit/wiki/AutoBean AutoBean] still requires lots of boilerplate code for each request ([http://code.google.com/p/gwt-gae-book/source/detail?r=829 incomplete sample, gave up])

= References =


http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/http/client/RequestBuilder.html

http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/http/client/Response.html

http://code.google.com/p/piriti/ (gson would have been great, but GWT doesn't support java reflection)

http://code.google.com/p/gwt-platform/issues/detail?id=179